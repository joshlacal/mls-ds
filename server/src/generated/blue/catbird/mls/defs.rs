// @generated - This file is generated by atrium-codegen. DO NOT EDIT.
//!Definitions for the `blue.catbird.mls.defs` namespace.
//!Shared type definitions for MLS (Message Layer Security) protocol
///Metadata for a conversation (name, description)
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(rename_all = "camelCase")]
pub struct ConvoMetadataData {
    ///Conversation description
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub description: core::option::Option<String>,
    ///Conversation display name
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub name: core::option::Option<String>,
}
pub type ConvoMetadata = crate::types::Object<ConvoMetadataData>;
///View of an MLS conversation with member and epoch information
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(rename_all = "camelCase")]
pub struct ConvoViewData {
    ///MLS cipher suite used for this conversation
    pub cipher_suite: String,
    ///Conversation creation timestamp
    pub created_at: crate::types::string::Datetime,
    ///DID of the conversation creator
    pub creator: crate::types::string::Did,
    ///Current MLS epoch number
    pub epoch: usize,
    ///MLS group identifier (hex-encoded) - canonical conversation ID
    pub group_id: String,
    ///Timestamp of last message
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub last_message_at: core::option::Option<crate::types::string::Datetime>,
    ///Current conversation members
    pub members: Vec<MemberView>,
    ///Optional conversation metadata
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub metadata: core::option::Option<ConvoMetadata>,
}
pub type ConvoView = crate::types::Object<ConvoViewData>;
///Reference to an MLS key package for adding members
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(rename_all = "camelCase")]
pub struct KeyPackageRefData {
    ///Supported cipher suite for this key package
    pub cipher_suite: String,
    ///Owner DID
    pub did: crate::types::string::Did,
    ///Base64url-encoded MLS key package bytes
    pub key_package: String,
    ///Hex-encoded SHA-256 hash of the key package bytes. Clients should use this server-computed hash when creating conversations to ensure hash consistency.
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub key_package_hash: core::option::Option<String>,
}
pub type KeyPackageRef = crate::types::Object<KeyPackageRefData>;
///View of a conversation member representing a single device. Multiple devices per user appear as separate members in MLS layer, but UI should group by userDid.
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(rename_all = "camelCase")]
pub struct MemberViewData {
    ///MLS credential bytes
    #[serde(with = "crate::atproto_bytes::option")]
    #[serde(default)]
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub credential: core::option::Option<Vec<u8>>,
    ///Device identifier (UUID). Unique per device.
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub device_id: core::option::Option<String>,
    ///Human-readable device name (e.g., 'Josh's iPhone'). Optional, may be null for legacy members.
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub device_name: core::option::Option<String>,
    ///Device-specific MLS DID (format: did:plc:user#device-uuid). Used in MLS operations.
    pub did: crate::types::string::Did,
    ///Whether this member (device) has admin privileges. Admin status is synced across all devices of the same user.
    pub is_admin: bool,
    ///When this device joined the conversation
    pub joined_at: crate::types::string::Datetime,
    ///MLS leaf index in ratchet tree structure
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub leaf_index: core::option::Option<usize>,
    ///When member was promoted to admin (if applicable)
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub promoted_at: core::option::Option<crate::types::string::Datetime>,
    ///DID of admin who promoted this member (if applicable)
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub promoted_by: core::option::Option<crate::types::string::Did>,
    ///User DID without device suffix (format: did:plc:user). Used for UI grouping and admin status sync.
    pub user_did: crate::types::string::Did,
}
pub type MemberView = crate::types::Object<MemberViewData>;
///View of an encrypted MLS message. Server follows 'dumb delivery service' model - sender identity must be derived by clients from decrypted MLS content for metadata privacy. Server GUARANTEES: (1) Sequential (epoch, seq) assignment per conversation, (2) Monotonic seq increment, (3) No seq reuse. Clients MUST process messages in (epoch ASC, seq ASC) order for correct MLS decryption.
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(rename_all = "camelCase")]
pub struct MessageViewData {
    ///MLS encrypted message ciphertext bytes
    #[serde(with = "crate::atproto_bytes")]
    pub ciphertext: Vec<u8>,
    ///Conversation identifier
    pub convo_id: String,
    ///Message creation timestamp (bucketed to 2-second intervals for traffic analysis protection)
    pub created_at: crate::types::string::Datetime,
    ///MLS epoch when message was sent
    pub epoch: usize,
    ///Message identifier (ULID for deduplication)
    pub id: String,
    ///Monotonically increasing sequence number within conversation. Server assigns sequentially starting from 1. Gaps may occur when members are removed from the conversation, but seq values are never reused.
    pub seq: usize,
}
pub type MessageView = crate::types::Object<MessageViewData>;
