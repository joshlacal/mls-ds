// @generated - This file is generated by atrium-codegen. DO NOT EDIT.
//!Definitions for the `blue.catbird.mls.createInvite` namespace.
//!Create a new invite link for a conversation
pub const NSID: &str = "blue.catbird.mls.createInvite";
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(rename_all = "camelCase")]
pub struct InputData {
    ///Conversation identifier
    pub convo_id: String,
    ///Optional expiration timestamp. Invite becomes invalid after this time.
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub expires_at: core::option::Option<crate::types::string::Datetime>,
    ///Optional maximum number of times this invite can be used. Defaults to unlimited.
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub max_uses: core::option::Option<core::num::NonZeroU64>,
    ///SHA-256 hash of the pre-shared key (hex-encoded). Used to verify invite link authenticity without exposing PSK.
    pub psk_hash: String,
    ///Optional DID restriction - invite can only be used by this specific DID
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub target_did: core::option::Option<crate::types::string::Did>,
}
pub type Input = crate::types::Object<InputData>;
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(rename_all = "camelCase")]
pub struct OutputData {
    ///Full invite details
    pub invite: InviteView,
    ///Unique identifier for this invite (ULID)
    pub invite_id: String,
}
pub type Output = crate::types::Object<OutputData>;
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(tag = "error", content = "message")]
pub enum Error {
    ///Caller is not an admin of this conversation
    Unauthorized(Option<String>),
    ///PSK hash is invalid or malformed
    InvalidPskHash(Option<String>),
    ///Conversation not found
    ConvoNotFound(Option<String>),
    ///Caller is not a member of this conversation
    NotMember(Option<String>),
}
impl std::fmt::Display for Error {
    fn fmt(&self, _f: &mut std::fmt::Formatter) -> std::fmt::Result {
        match self {
            Error::Unauthorized(msg) => {
                write!(_f, "Unauthorized")?;
                if let Some(msg) = msg {
                    write!(_f, ": {msg}")?;
                }
            }
            Error::InvalidPskHash(msg) => {
                write!(_f, "InvalidPSKHash")?;
                if let Some(msg) = msg {
                    write!(_f, ": {msg}")?;
                }
            }
            Error::ConvoNotFound(msg) => {
                write!(_f, "ConvoNotFound")?;
                if let Some(msg) = msg {
                    write!(_f, ": {msg}")?;
                }
            }
            Error::NotMember(msg) => {
                write!(_f, "NotMember")?;
                if let Some(msg) = msg {
                    write!(_f, ": {msg}")?;
                }
            }
        }
        Ok(())
    }
}
///View of a conversation invite with usage tracking
#[derive(serde::Serialize, serde::Deserialize, Debug, Clone, PartialEq, Eq)]
#[serde(rename_all = "camelCase")]
pub struct InviteViewData {
    ///Conversation identifier
    pub convo_id: String,
    ///Invite creation timestamp
    pub created_at: crate::types::string::Datetime,
    ///DID of admin who created this invite
    pub created_by: crate::types::string::Did,
    ///Optional expiration timestamp
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub expires_at: core::option::Option<crate::types::string::Datetime>,
    ///Unique identifier for this invite (ULID)
    pub invite_id: String,
    ///Whether this invite has been revoked
    pub is_revoked: bool,
    ///Optional maximum number of uses
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub max_uses: core::option::Option<core::num::NonZeroU64>,
    ///SHA-256 hash of the pre-shared key (hex-encoded)
    pub psk_hash: String,
    ///Timestamp when invite was revoked (if applicable)
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub revoked_at: core::option::Option<crate::types::string::Datetime>,
    ///DID of admin who revoked this invite (if applicable)
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub revoked_by: core::option::Option<crate::types::string::Did>,
    ///Optional DID restriction - invite can only be used by this specific DID
    #[serde(skip_serializing_if = "core::option::Option::is_none")]
    pub target_did: core::option::Option<crate::types::string::Did>,
    ///Number of times this invite has been used
    pub use_count: usize,
}
pub type InviteView = crate::types::Object<InviteViewData>;
