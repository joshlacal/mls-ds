{
  "lexicon": 1,
  "id": "blue.catbird.mls.resolveReport",
  "description": "Resolve a report with an action (admin-only)",
  "defs": {
    "main": {
      "type": "procedure",
      "description": "Mark a report as resolved with the action taken. Admin-only operation. Records resolution in audit trail.",
      "input": {
        "encoding": "application/json",
        "schema": {
          "type": "object",
          "required": ["reportId", "action"],
          "properties": {
            "reportId": { 
              "type": "string",
              "description": "Report identifier to resolve"
            },
            "action": {
              "type": "string",
              "description": "Action taken in response to report",
              "knownValues": ["removed_member", "dismissed", "no_action"]
            },
            "notes": {
              "type": "string",
              "maxLength": 1000,
              "description": "Optional internal notes about resolution"
            }
          }
        }
      },
      "output": {
        "encoding": "application/json",
        "schema": {
          "type": "object",
          "required": ["ok"],
          "properties": {
            "ok": { 
              "type": "boolean",
              "description": "Whether resolution succeeded"
            }
          }
        }
      },
      "errors": [
        { "name": "NotAdmin", "description": "Caller is not an admin" },
        { "name": "ReportNotFound", "description": "Report does not exist" },
        { "name": "AlreadyResolved", "description": "Report was already resolved" }
      ]
    }
  }
}
