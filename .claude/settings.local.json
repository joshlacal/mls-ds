{
  "permissions": {
    "allow": [
      "Bash(cargo test:*)",
      "Bash(cargo tree:*)",
      "Bash(find:*)",
      "Bash(cargo run:*)",
      "Bash(rustc:*)",
      "Bash(./test_atproto_bytes:*)",
      "Bash(cargo check:*)",
      "WebSearch",
      "Bash(cat:*)",
      "Bash(git rm:*)",
      "Bash(journalctl:*)",
      "Bash(docker logs:*)",
      "Bash(python3:*)",
      "Bash(RUST_BACKTRACE=1 cargo run:*)",
      "Bash(RUST_BACKTRACE=full cargo run:*)",
      "Bash(git stash:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix(lexicon): Update registerDevice to match server implementation\n\nThe lexicon definition was completely out of sync with the actual\nserver implementation, causing all registerDevice requests to fail\nwith 400 Bad Request during JSON deserialization.\n\nChanges:\n- Input: Replace deviceId/platform/appVersion with actual required fields\n  - deviceName (string, required)\n  - keyPackages (array of KeyPackageItem, required)\n  - signaturePublicKey (bytes, 32-byte Ed25519 key, required)\n\n- Output: Update to match RegisterDeviceOutput struct\n  - deviceId (server-generated UUID)\n  - mlsDid (credential DID: did:plc:user#device-uuid)\n  - autoJoinedConvos (array of conversation IDs)\n  - welcomeMessages (optional array of WelcomeMessage)\n\n- Added type definitions:\n  - keyPackageItem: MLS key package with cipher suite and expiration\n  - welcomeMessage: Conversation ID + base64-encoded Welcome message\n\nThis matches the implementation in server/src/handlers/register_device.rs\n\nFixes: Device registration returning HTTP 400 with no server logs\nEOF\n)\")",
      "Bash(git push:*)",
      "Bash(docker exec:*)",
      "Bash(git commit:*)",
      "Bash(SQLX_OFFLINE=true cargo build:*)",
      "Bash(export SQLX_OFFLINE=true)",
      "Bash(cargo build:*)",
      "Bash(./deploy.sh:*)",
      "Bash(psql:*)",
      "Bash(cargo sqlx:*)",
      "Bash(env)",
      "Bash(SQLX_OFFLINE=true cargo check:*)",
      "Bash(docker stop:*)",
      "Bash(make migrate:*)",
      "Bash(docker start:*)",
      "Bash(docker-compose up:*)",
      "Bash(docker run:*)",
      "Bash(catbird-mls-server:latest)",
      "Bash(docker rm:*)",
      "Bash(curl:*)",
      "Bash(docker-compose down:*)",
      "Bash(docker compose:*)",
      "Bash(chmod:*)",
      "Bash(./scripts/clear-db-fast.sh:*)",
      "Bash(timeout 60 docker logs:*)",
      "WebFetch(domain:book.openmls.tech)",
      "Bash(server-mls-server)",
      "Bash(timeout 10 docker logs:*)",
      "Bash(docker port:*)",
      "Bash(docker inspect:*)",
      "Bash(docker ps:*)",
      "Bash(DATABASE_URL=\"postgresql://catbird:catbird_secure_password_change_in_production@localhost:5433/catbird\" cargo sqlx prepare:*)",
      "Bash(sudo systemctl status:*)",
      "Bash(sudo nginx:*)",
      "Bash(sudo tail:*)",
      "Bash(sudo systemctl:*)",
      "Bash(sudo journalctl:*)",
      "Bash(docker network:*)",
      "Bash(docker build:*)",
      "Bash(DATABASE_URL=\"postgresql://catbird:changeme@localhost:5433/catbird\" cargo sqlx:*)",
      "Bash(docker-compose ps:*)",
      "Bash(docker restart:*)"
    ],
    "deny": [],
    "ask": []
  }
}
